<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Management</title>
</head>

<body>

    <label name="task" for="task">Task :</label>
    <br><br>
    <input type="text" id="taskItem" placeholder="Enter your task"><br>

    <p id=myList></p>

    <script>
        let input = document.querySelector('input');
        input.addEventListener('keyup', function(enterKey) {
            var id = 0;
            if (enterKey.keyCode === 13) {
                console.log(enterKey.target.value);

                ++id
                localStorage.setItem(id, enterKey.target.value)
                sessionStorage.setItem(id, enterKey.target.value)
            }
            for (let index = 0; index < localStorage.length; index++) {

                key = 0
                key = localStorage.key(index)
                localStorage.getItem(key)
            }
        })

        window.console = {
            log: function(str) {
                var id = 0
                var node = document.createElement("div");
                var btnDelete = document.createElement("button");
                btnDelete.textContent = "X";
                btnDelete.setAttribute("id", ++id);
                node.prepend(document.createTextNode(str))
                document.getElementById("myList").prepend(node);
                document.getElementById("myList").prepend(btnDelete);
                btnDelete.addEventListener("click", function() {
                    localStorage.removeItem(this.id);
                });

            }
        }

        window.onload = function() {
            var id = localStorage.length;

            if (id > 0) {
                for (let index = 0; index < localStorage.length; index++) {
                    var node = document.createElement("div");
                    var btnDelete = document.createElement("button");
                    btnDelete.textContent = "X";
                    keyId = localStorage.key(index);
                    if (keyId != "IsThisFirstTime_Log_From_LiveServer") {
                        var item = localStorage.getItem(keyId);
                        node.prepend(document.createTextNode(item))
                        document.getElementById("myList").prepend(node);
                        document.getElementById("myList").prepend(btnDelete);

                    }
                }
            }
        }
    </script>
</body>

</html>